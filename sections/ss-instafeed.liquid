{% comment %}
---------------------------------------------------------
Copyright © 2023 Section Store. All rights reserved.
Unauthorized copying, modification, distribution, or use
of this code or any portion of it, is strictly prohibited.
Violators will be prosecuted to the fullest extent of the law.
For inquiries or permissions, contact daniel@section.store
---------------------------------------------------------
{% endcomment %}

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>

{%- liquid 
  assign padding_horizontal = section.settings.padding_horizontal
  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign border_color = section.settings.border_color
  assign border_thickness = section.settings.border_thickness
  assign margin_top = section.settings.margin_top
  assign margin_bottom = section.settings.margin_bottom
  assign margin_horizontal_mobile = section.settings.margin_horizontal_mobile
  assign margin_horizontal = section.settings.margin_horizontal
  assign background_color = section.settings.background_color
  assign background_gradient = section.settings.background_gradient
  assign width = section.settings.width
  assign content_width = section.settings.content_width
  assign lazy = section.settings.lazy
  assign section_radius = section.settings.section_radius
  assign background_style = section.settings.background_style

  assign content_max_width = section.settings.content_max_width
  assign content_align = section.settings.content_align
  assign content_align_mobile = section.settings.content_align_mobile
  
  assign content_horizontal_align = ""
  if content_align == "center"
    assign content_horizontal_align = "center"
  elsif content_align == "right"
    assign content_horizontal_align = "end"
  else
    assign content_horizontal_align = "start"
  endif

  assign content_horizontal_align_mobile = ""
  if content_align_mobile == "center"
    assign content_horizontal_align_mobile = "center"
  elsif content_align_mobile == "right"
    assign content_horizontal_align_mobile = "end"
  else
    assign content_horizontal_align_mobile = "start"
  endif

  assign use_slider_mobile = section.settings.use_slider_mobile
  assign cards_per_row = section.settings.cards_per_row  
  assign cards_per_row_mobile = section.settings.cards_per_row_mobile  
  assign cards_gap = section.settings.cards_gap
  assign cards_gap_mobile = section.settings.cards_gap_mobile    
  assign cards_mt = section.settings.cards_mt
  assign cards_mt_mobile = section.settings.cards_mt_mobile

  assign icon_size_mobile = section.settings.icon_size_mobile
  assign icon_size = section.settings.icon_size
  assign icon_border_thickness = section.settings.icon_border_thickness
  assign icon_border_color = section.settings.icon_border_color
  assign icon_bg_color = section.settings.icon_bg_color
  assign icon_bg_opacity = section.settings.icon_bg_opacity
  assign icon_color = section.settings.icon_color
  assign icon_position_mobile = section.settings.icon_position_mobile
  assign icon_position = section.settings.icon_position

  assign media_radius = section.settings.media_radius
  assign media_border_thickness = section.settings.media_border_thickness
  assign media_border_color = section.settings.media_border_color  
  assign media_ratio = section.settings.media_ratio
  assign media_ratio_mobile = section.settings.media_ratio_mobile

    assign loading_attribute = 'lazy'
  unless lazy
    assign loading_attribute = 'eiger'
  endunless
-%}

{%- style -%}

  .section-{{ section.id }} {
    border-top: solid {{ border_color }} {{ border_thickness }}px;
    border-bottom: solid {{ border_color }} {{ border_thickness }}px;
    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;
    margin-left: {{ margin_horizontal_mobile }}rem;
    margin-right: {{ margin_horizontal_mobile }}rem;
    border-radius: {{ section_radius | times: 0.6 | round: 0 }}px;
    overflow: hidden;
  }
  
  .section-{{ section.id }}-settings {
    margin: 0 auto;
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
    padding-left: {{ padding_horizontal_mobile }}rem;
    padding-right: {{ padding_horizontal_mobile }}rem;
  }

  .collection-top-{{ section.id }} {
    display: flex;
    flex-direction: column;
    align-items: {{ content_horizontal_align_mobile }};
    justify-content: space-between;
    gap: 20px;
  }

  .instafeed-cards-{{ section.id }} {
    display: grid;
    grid-template-columns: repeat({{ cards_per_row_mobile }}, 1fr);
    gap: {{ cards_gap_mobile }}px;
    margin-top: {{ cards_mt_mobile }}px;
  }
  
  .instafeed-card-{{ section.id }} {
    border-radius: {{ media_radius }}px;
    border: {{ media_border_thickness }}px solid {{ media_border_color }};
    box-sizing: border-box !important;
    overflow: hidden;
    position: relative;
  }

  .instafeed-video-{{ section.id }} {
    height: 100%;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  .instafeed-video-{{ section.id }} video,
  .instafeed-video-{{ section.id }} iframe {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    box-shadow: none;
    border: 0;
  }

  .instafeed-image-{{ section.id }} {
    height: 100%;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }
  
  .instafeed-image-{{ section.id }} img,
  .instafeed-image-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    box-shadow: none;
    border: 0;
  }

  .instafeed-image-{{ section.id }} svg {
    background-color: #AFAFAF;
  }

  .instafeed-icon-{{ section.id }} {
    position: absolute;
    width: {{ icon_size_mobile }}px;
    height: {{ icon_size_mobile }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: {{ icon_border_thickness }}px solid {{ icon_border_color }};
    border-radius: 50%;
    padding: 4px;
    background-color: {{ icon_bg_color | hex_to_rgba: icon_bg_opacity }};
    z-index: 2;
    transition: all 0.25s ease 0s;
    will-change: opacity;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    cursor: pointer;
  }

  .instafeed-icon-{{ section.id }} svg path {
    fill: {{ icon_color }};
  }

  .instafeed-icon-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .instafeed-icon-{{ section.id }} .instafeed-pause-{{ section.id }} {
    display: none !important;
  }

  .instafeed-icon-{{ section.id }}.active .instafeed-pause-{{ section.id }} {
    display: block !important;
  }

  .instafeed-icon-{{ section.id }}.active .instafeed-play-{{ section.id }} {
    display: none !important;
  }

  .instafeed-icon-{{ section.id }}.hide {
    opacity: 0;
  }

  .instafeed-cards-desktop-{{ section.id }} {
    display: none;
  }

  .instafeed-cards-slider-{{ section.id }} {
    display: block;
    margin-top: {{ cards_mt_mobile }}px;
    margin-left: -{{ padding_horizontal_mobile }}rem !important;
    margin-right: -{{ padding_horizontal_mobile }}rem !important;
    padding-left: {{ padding_horizontal_mobile }}rem !important;
    padding-right: {{ padding_horizontal_mobile }}rem !important;
  }

  @media(min-width: 1024px) {

    .section-{{ section.id }} {
      margin-top: {{ margin_top }}px;
      margin-bottom: {{ margin_bottom }}px;
      margin-left: {{ margin_horizontal }}rem;
      margin-right: {{ margin_horizontal }}rem;
      border-radius: {{ section_radius }}px;
    }
    
    .section-{{ section.id }}-settings {
      padding: 0 5rem;
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
      padding-left: {{ padding_horizontal }}rem;
      padding-right: {{ padding_horizontal }}rem;
    }

    .collection-top-{{ section.id }} {
      {% if content_horizontal_align == "end" %}flex-direction: row-reverse;{% else %}flex-direction: row;{% endif %}
      align-items: end;
      gap: 48px;
    }
    
    .instafeed-card-{{ section.id }}.big-video {
      grid-row-end: span 2;
      grid-column-end: span 2;
    }
    
    .instafeed-cards-{{ section.id }} {
      grid-template-columns: repeat({{ cards_per_row }}, 1fr);
      gap: {{ cards_gap }}px;
      margin-top: {{ cards_mt }}px;
    }  

    .instafeed-icon-{{ section.id }} {
      width: {{ icon_size }}px;
      height: {{ icon_size }}px;
    }

    .instafeed-cards-desktop-{{ section.id }} {
      display: grid;
    }

    .instafeed-cards-slider-{{ section.id }} {
      display: none !important;
    }
  }
  
{%- endstyle -%}

{% if width == 'custom' %}
  <style>
    .section-{{ section.id }}-settings {
      max-width: {{ content_width }}px;
    }
  </style>
{% elsif width == 'page' %}
  <style>
    .section-{{ section.id }}-settings {
      max-width: clamp(100px, var(--page-content-width, var(--page-width)), 100%);
    }
  </style>
{% endif %}

{% if margin_horizontal_mobile > 0 %}
  <style>
    .section-{{ section.id }} {
      border-left: solid {{ border_color }} {{ border_thickness }}px;
      border-right: solid {{ border_color }} {{ border_thickness }}px;
    }
    
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: 0px;
        border-right: 0px;
      }
    }
  </style>
{% endif %}

{% if margin_horizontal > 0 %}
  <style>
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: solid {{ border_color }} {{ border_thickness }}px;
        border-right: solid {{ border_color }} {{ border_thickness }}px;
      }
    }
  </style>
{% endif %}

{% if media_ratio_mobile == "portrait" %}
  <style>
    .instafeed-card-{{ section.id }} {
     aspect-ratio: 9.6/14; 
    }
  </style>
{% elsif media_ratio_mobile == "landscape" %}
  <style>
    .instafeed-card-{{ section.id }} {
     aspect-ratio: 12/7; 
    }
  </style>
{% elsif media_ratio_mobile == "square" %}
  <style>
    .instafeed-card-{{ section.id }} {
     aspect-ratio: 12/12; 
    }
  </style>
{% endif %}

{% if media_ratio == "portrait" %}
  <style>
    @media(min-width: 1024px) {
      .instafeed-card-{{ section.id }} {
       aspect-ratio: 9.6/14; 
      } 
    }
  </style>
{% elsif media_ratio == "landscape" %}
  <style>
    @media(min-width: 1024px) {
      .instafeed-card-{{ section.id }} {
       aspect-ratio: 12/7; 
      }
    }
  </style>
{% elsif media_ratio == "square" %}
  <style>
    @media(min-width: 1024px) {
      .instafeed-card-{{ section.id }} {
       aspect-ratio: 12/12; 
      }
    }
  </style>
{% else %}
  <style>
    @media(min-width: 1024px) {
      .instafeed-card-{{ section.id }} {
       aspect-ratio: auto; 
      }
    }
  </style>
{% endif %}

{% if icon_position_mobile == "top_left" %}
  <style>
    .instafeed-icon-{{ section.id }} {
      top: 10px;
      left: 10px;
    }
  </style>
{% elsif icon_position_mobile == "top_right" %}
  <style>
    .instafeed-icon-{{ section.id }} {
      top: 10px;
      right: 10px;
    }
  </style>
{% elsif icon_position_mobile == "bottom_left" %}
  <style>
    .instafeed-icon-{{ section.id }} {
      bottom: 10px;
      left: 10px;
    }
  </style>
{% elsif icon_position_mobile == "center" %}
  <style>
    .instafeed-icon-{{ section.id }} {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  </style>
{% else %}
  <style>
    .instafeed-icon-{{ section.id }} {
      bottom: 10px;
      right: 10px;
    }
  </style>
{% endif %}

{% if icon_position == "top_left" %}
  <style>
    @media(min-width: 1024px){
       .instafeed-icon-{{ section.id }} {
        top: 10px;
        left: 10px;
        right: unset;
        bottom: unset;
        transform: translate(0);
      } 
    }
  </style>
{% elsif icon_position == "top_right" %}
  <style>
     @media(min-width: 1024px){
      .instafeed-icon-{{ section.id }} {
        top: 10px;
        right: 10px;
        left: unset;
        bottom: unset;
        transform: translate(0);
      }
     }
  </style>
{% elsif icon_position == "bottom_left" %}
  <style>
    @media(min-width: 1024px){
      .instafeed-icon-{{ section.id }} {
        bottom: 10px;
        left: 10px;
        top: unset;
        right: unset;
        transform: translate(0);
      }
    }
  </style>
{% elsif icon_position == "center" %}
  <style>
    @media(min-width: 1024px){
      .instafeed-icon-{{ section.id }} {
       top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        bottom: unset;
        right: unset;
      }
    }
  </style>
{% else %}
  <style>
    @media(min-width: 1024px){
      .instafeed-icon-{{ section.id }} {
        bottom: 10px;
        right: 10px;
        top: unset;
        left: unset;
        transform: translate(0);
      }
    }
  </style>
{% endif %}

{% for block in section.blocks %}
  {% case block.type %}
    {% when 'heading' %}
      <style>
        {{ block.settings.heading_font | font_face: font_display: 'swap' }}
 
        .collection-heading-{{ block.id }} {
          width: 100%;
          text-align: {{ content_align_mobile }};
          margin-top: {{ block.settings.heading_mt_mobile }}px;
        }

        .collection-heading-{{ block.id }} * {
          margin: 0;
          font-size: {{ block.settings.heading_size_mobile }}px;
          color: {{ block.settings.heading_color }};
          line-height: {{ block.settings.heading_height }}%;
          text-transform: unset;
          text-decoration: none;
          word-break: break-word;
        }
        @media(min-width: 1024px) {
          .collection-heading-{{ block.id }} {
            text-align: {{ content_align }};
            margin-top: {{ block.settings.heading_mt }}px;
            max-width: {{ content_max_width }}%;
          }
        
          .collection-heading-{{ block.id }} * {
            font-size: {{ block.settings.heading_size }}px;
          }
        }
      </style>
      {% if block.settings.heading_custom %}
        <style>
          .collection-heading-{{ block.id }} * {
            font-family: {{ block.settings.heading_font.family }}, {{ block.settings.heading_font.fallback_families }};
            font-weight: {{ block.settings.heading_font.weight }};
            font-style: {{ block.settings.heading_font.style }};
          }
        </style>
      {% endif %}

      
      {% if content_align_mobile == "center" %}
        <style>
          .collection-heading-{{ block.id }} {
            margin-left: auto;
            margin-right: auto;
          }
        </style>
      {% elsif content_align_mobile == "right" %}
        <style>
          .collection-heading-{{ block.id }} {
            margin-left: auto;
          }
        </style>
      {% endif %}
      
      {% if content_align == "center" %}
        <style>
          @media(min-width: 1024px) {
            .collection-heading-{{ block.id }} {
              margin-left: auto;
              margin-right: auto;
            } 
          }
        </style>
      {% elsif content_align == "right" %}
        <style>
          @media(min-width: 1024px) {
            .collection-heading-{{ block.id }} {
              margin-left: auto;
              margin-right: 0px;
            } 
          }
        </style>
      {% else %}
        <style>
          @media(min-width: 1024px) {
            .collection-heading-{{ block.id }} {
              margin-left: 0px;
              margin-right: 0px;
            } 
          }
        </style>
      {% endif %}

    {% when 'sub_heading' %}
      <style>
        {{ block.settings.sub_heading_font | font_face: font_display: 'swap' }}
 
        .collection-sub-heading-{{ block.id }} {
          width: 100%;
          text-align: {{ content_align_mobile }};
          margin-top: {{ block.settings.sub_heading_mt_mobile }}px;
        }

        .collection-sub-heading-{{ block.id }} * {
          margin: 0;
          font-size: {{ block.settings.sub_heading_size_mobile }}px;
          color: {{ block.settings.sub_heading_color }};
          line-height: {{ block.settings.sub_heading_height }}%;
          text-transform: unset;
          text-decoration: none;
          word-break: break-word;
        }
        @media(min-width: 1024px) {
          .collection-sub-heading-{{ block.id }} {
            text-align: {{ content_align }};
            max-width: {{ content_max_width }}%;
            margin-top: {{ block.settings.sub_heading_mt }}px;
          }
        
          .collection-sub-heading-{{ block.id }} * {
            font-size: {{ block.settings.sub_heading_size }}px;
          }
        }
      </style>
      {% if block.settings.sub_heading_custom %}
        <style>
          .collection-sub-heading-{{ block.id }} * {
            font-family: {{ block.settings.sub_heading_font.family }}, {{ block.settings.sub_heading_font.fallback_families }};
            font-weight: {{ block.settings.sub_heading_font.weight }};
            font-style: {{ block.settings.sub_heading_font.style }};
          }
        </style>
      {% endif %}

      {% if content_align_mobile == "center" %}
        <style>
          .collection-sub-heading-{{ block.id }} {
            margin-left: auto;
            margin-right: auto;
          }
        </style>
      {% elsif content_align_mobile == "right" %}
        <style>
          .collection-sub-heading-{{ block.id }} {
            margin-left: auto;
          }
        </style>
      {% endif %}
      
      {% if content_align == "center" %}
        <style>
          @media(min-width: 1024px) {
            .collection-sub-heading-{{ block.id }} {
              margin-left: auto;
              margin-right: auto;
            } 
          }
        </style>
      {% elsif content_align == "right" %}
        <style>
          @media(min-width: 1024px) {
            .collection-sub-heading-{{ block.id }} {
              margin-left: auto;
              margin-right: 0px;
            } 
          }
        </style>
      {% else %}
        <style>
          @media(min-width: 1024px) {
            .collection-sub-heading-{{ block.id }} {
              margin-left: 0px;
              margin-right: 0px;
            } 
          }
        </style>
      {% endif %}


    {% when 'text' %}
      <style>
        {{ block.settings.text_font | font_face: font_display: 'swap' }}
 
        .collection-text-{{ block.id }} {
          width: 100%;
          text-align: {{ content_align_mobile }};
          margin-top: {{ block.settings.text_mt_mobile }}px;
        }

        .collection-text-{{ block.id }} * {
          margin: 0;
          font-size: {{ block.settings.text_size_mobile }}px;
          color: {{ block.settings.text_color }};
          line-height: {{ block.settings.text_height }}%;
          text-transform: unset;
          text-decoration: none;
          word-break: break-word;
        }
        @media(min-width: 1024px) {
          .collection-text-{{ block.id }} {
            text-align: {{ content_align }};
            max-width: {{ content_max_width }}%;
            margin-top: {{ block.settings.text_mt }}px;
          }
        
          .collection-text-{{ block.id }} * {
            font-size: {{ block.settings.text_size }}px;
          }
        }
      </style>
      {% if block.settings.text_custom %}
        <style>
          .collection-text-{{ block.id }} * {
            font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};
            font-weight: {{ block.settings.text_font.weight }};
            font-style: {{ block.settings.text_font.style }};
          }
        </style>
      {% endif %}

      {% if content_align_mobile == "center" %}
        <style>
          .collection-text-{{ block.id }} {
            margin-left: auto;
            margin-right: auto;
          }
        </style>
      {% elsif content_align_mobile == "right" %}
        <style>
          .collection-text-{{ block.id }} {
            margin-left: auto;
          }
        </style>
      {% endif %}
      
      {% if content_align == "center" %}
        <style>
          @media(min-width: 1024px) {
            .collection-text-{{ block.id }} {
              margin-left: auto;
              margin-right: auto;
            } 
          }
        </style>
      {% elsif content_align == "right" %}
        <style>
          @media(min-width: 1024px) {
            .collection-text-{{ block.id }} {
              margin-left: auto;
              margin-right: 0px;
            } 
          }
        </style>
      {% else %}
        <style>
          @media(min-width: 1024px) {
            .collection-text-{{ block.id }} {
              margin-left: 0px;
              margin-right: 0px;
            } 
          }
        </style>
      {% endif %}

  {% when 'button' %}  
      <style>
        {{  block.settings.button_font | font_face: font_display: 'swap' }}

        .instafeed-button-{{ block.id }} {
          display: flex;
          align-items: center;
          justify-content: center;
          max-width: fit-content;
          gap: 10px;
          width: 100%;
          margin: 0;         
          font-size: {{ block.settings.button_size_mobile }}px;
          color: {{ block.settings.button_color }};
          line-height: {{ block.settings.button_height }}%;
          text-align: center;
          text-transform: unset;
          text-decoration: none;
          padding: {{ block.settings.button_padding_vertical_mobile }}px {{ block.settings.button_padding_horizontal_mobile }}px;
          border-radius: {{ block.settings.button_radius }}px;
          transition: all 0.3s ease 0s;
          background-color: transparent;
          border: 0px;
          cursor: pointer;
          font-weight: 700;
          position: relative;
          z-index: 1;
        }

        .instafeed-button-inner-{{ block.id }} {
          margin: 0px;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          text-decoration: none;
        }

        .instafeed-button-{{ block.id }}:hover {
          color: {{ block.settings.button_hover_color }};
          transition: all 0.25s ease 0s;
        }

        .instafeed-button-{{ block.id }} svg {
          width: 14px;
          height: 14px;
        }

        .instafeed-button-{{ block.id }} svg path {
          fill: {{ block.settings.button_color }};
          transition: all 0.25s ease 0s;
        }

        .instafeed-button-{{ block.id }}:hover svg path {
          fill: {{ block.settings.button_hover_color }};
          transition: all 0.25s ease 0s;
        }

        @media (min-width: 1024px) {
          .instafeed-button-{{ block.id }} {
            padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
            font-size: {{ block.settings.button_size }}px;
          }
        }
      </style>

      {% if block.settings.use_shadow %}
        <style>
          .instafeed-button-{{ block.id }}:hover {
            -webkit-box-shadow: 0px 0px 8px 2px {{ block.settings.button_bg_color }};
            -moz-box-shadow: 0px 0px 8px 2px {{ block.settings.button_bg_color }};
            box-shadow: 0px 0px 8px 2px {{ block.settings.button_bg_color }};
          }
        </style>
      {% endif %}  

      {% if block.settings.button_custom %}
        <style>
          .instafeed-button-{{ block.id }} {
            font-family: {{ block.settings.button_font.family }}, {{ block.settings.button_font.fallback_families }};
            font-weight: {{ block.settings.button_font.weight }};
            font-style: {{ block.settings.button_font.style }};
          }
        </style>
      {% endif %}

      {% if block.settings.button_style == "non_outline" or block.settings.button_style == "non_outline_arrow" %}
        <style>
          .instafeed-button-{{ block.id }} {
            transition: all 0.3s ease 0s;
            background-color: {{  block.settings.button_bg_color }};
          }
      
          .instafeed-button-{{ block.id }}:hover {
            transition: all 0.3s ease 0s;
            background-color: {{  block.settings.button_bg_hover_color }};
          }
        </style>
      {% elsif block.settings.button_style == "outline" or block.settings.button_style == "outline_arrow" %}
        <style>          
          .instafeed-button-{{ block.id }} {
            transition: all 0.3s ease 0s;
            background-color: {{  block.settings.button_bg_color }};
            border: {{  block.settings.button_border_thickness }}px solid {{  block.settings.button_border_color }};
          }
      
          .instafeed-button-{{ block.id }}:hover {
            transition: all 0.3s ease 0s;
            background-color: {{  block.settings.button_bg_hover_color }};
            border: {{  block.settings.button_border_thickness }}px solid {{ block.settings.button_border_hover_color }};
          }
        </style>
      {% elsif block.settings.button_style == "link" %}
        <style>
          .instafeed-button-{{ block.id }} {
            padding: 0px !important;
            -webkit-box-shadow: none !important;
            -moz-box-shadow: none !important;
            box-shadow: none !important;
          }
        </style>
      {% endif %}   

  {% endcase %}
{% endfor %}

<div class="section-{{ section.id }} collection-{{ section.id }}" {% if background_style == 'solid' %}style="background-color:{{ background_color }};"{% else %} style="background-image: {{ background_gradient }};"{% endif %}>
  <div class="section-{{ section.id }}-settings">
    <div class="collection-top-{{ section.id }}">
      <div class="collection-left-{{ section.id }}" style="flex: 1 1 0;">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'heading' %}
              {% if block.settings.heading != blank %}
                <div class="collection-heading-{{ block.id }}">{{ block.settings.heading }}</div> 
              {% endif %} 
            {% when 'sub_heading' %}
              {% if block.settings.sub_heading != blank %}
                <div class="collection-sub-heading-{{ block.id }}">{{ block.settings.sub_heading }}</div> 
              {% endif %} 
            {% when 'text' %}
              {% if block.settings.text != blank %}
                <div class="collection-text-{{ block.id }}">{{ block.settings.text }}</div> 
              {% endif %} 
          {% endcase %}
        {% endfor %} 
      </div>
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'button' %}
            {% if block.settings.button != blank %}                 
              <a href="{{ block.settings.url }}" {% if block.settings.open_in_new_tab %}target="_blank"{% endif %} class="instafeed-button-{{ block.id }}">
                <p class="instafeed-button-inner-{{ block.id }}">
                  {{ block.settings.button }}
                  {% if block.settings.button_style == "non_outline_arrow" or block.settings.button_style == "outline_arrow" %}
                    <svg width="192" height="192" viewBox="0 0 192 192" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M187.827 98.7858C188.123 98.4749 188.123 98.4749 188.123 98.1761C188.419 97.8652 188.419 97.5663 188.704 97.5663C189 96.9566 189 96.6458 189 96.0361C189 95.4263 189 94.8166 188.704 94.5058C188.704 94.195 188.408 93.8961 188.123 93.5852C188.123 93.2744 187.827 93.2744 187.827 92.9755L103.287 4.21945C102.41 3.29889 101.533 3 100.668 3C99.791 3 98.6295 3.31083 98.0488 4.21945C97.1719 5.14 96.8872 6.06058 96.8872 6.96919C96.8872 7.88974 97.1833 9.10918 98.0488 9.7189L175.587 92.0539H6.79206C4.75371 92.0539 3 93.895 3 96.0351C3 98.1751 4.75365 100.016 6.79206 100.016H175.575L97.7543 182.042C96.2967 183.572 96.2967 186.322 97.7543 187.852C99.2119 189.383 101.831 189.383 103.288 187.852L187.827 98.7858Z" fill="black"></path>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M188.607 97.5657C188.432 97.5657 188.365 97.6788 188.27 97.8382C188.211 97.9378 188.141 98.0554 188.027 98.1748C188.027 98.4734 188.027 98.4734 187.731 98.7839L103.281 187.759C101.825 189.287 99.2085 189.287 97.7524 187.759C96.2963 186.23 96.2963 183.483 97.7524 181.954L175.492 100.013L6.88489 100.013C4.8486 100.013 3.09677 98.1739 3.09677 96.036C3.09677 93.8982 4.84866 92.059 6.88489 92.059L175.504 92.059L98.0465 9.80878C97.182 9.19968 96.8862 7.9815 96.8862 7.0619C96.8862 6.15422 97.1706 5.2346 98.0465 4.315C98.6267 3.40732 99.787 3.0968 100.663 3.0968C101.527 3.0968 102.403 3.39539 103.279 4.315L187.731 92.9796C187.731 93.1274 187.804 93.2021 187.877 93.2774C187.952 93.3543 188.027 93.4319 188.027 93.5887C188.046 93.6098 188.066 93.6308 188.085 93.6518C188.338 93.9267 188.584 94.1935 188.606 94.4689C188.607 94.482 188.607 94.4951 188.607 94.5083C188.903 94.8188 188.903 95.4279 188.903 96.037C188.903 96.6461 188.903 96.9566 188.607 97.5657ZM191.489 93.2767C191.79 93.8661 191.89 94.4204 191.934 94.7363C192.001 95.2226 192 95.7194 192 95.9856L192 96.037C192 96.0544 192 96.0729 192 96.0926C192 96.3523 192.001 96.8096 191.924 97.2931C191.828 97.8884 191.64 98.41 191.393 98.9184L190.546 100.663H190.212C190.127 100.759 190.038 100.852 189.988 100.905L189.974 100.92L105.527 189.891C102.85 192.701 98.1865 192.704 95.51 189.895C94.1476 188.464 93.5636 186.587 93.5636 184.857C93.5636 183.128 94.1468 181.252 95.5071 179.822M191.489 93.2767C191.316 92.7908 191.078 92.4357 190.938 92.2406C190.903 92.1912 190.866 92.142 190.828 92.0939V91.7408L105.522 2.17912C104.076 0.661813 102.397 0 100.663 0C99.3914 0 97.0569 0.401401 95.6212 2.37737C94.3151 3.83819 93.7895 5.45521 93.7895 7.0619C93.7895 8.26663 94.1183 10.6061 95.9608 12.111L168.333 88.9622L6.88489 88.9622C2.9981 88.9622 0 92.3316 0 96.036C0 99.7405 2.99801 103.11 6.88489 103.11L168.285 103.11" fill="black"></path>
                      <path d="M169.5 104L16.5 102.5V90H171L97.5 10.5V7L107.5 4.5C131.167 29.6667 180.2 81.5 187 87.5C193.8 93.5 191.5 99 189.5 101L105.5 184L94 181.5L169.5 104Z" fill="black"></path>
                    </svg>
                  {% endif %}
                </p>
              </a>     
            {% endif %}
        {% endcase %}
      {% endfor %}
    </div>

    <div class="instafeed-cards-{{ section.id }} {% if use_slider_mobile %}instafeed-cards-desktop-{{ section.id }}{% endif %}">
      {% for block in section.blocks %}
        {% if block.type == 'video' %}
          <div class="instafeed-card-{{ section.id }} {% if block.settings.use_big_video %}big-video{% endif %}">
            <div class="instafeed-video-{{ section.id }}">
              {% assign video_url_id = block.settings.video_url.id %}
              {% assign video_id = block.settings.video.id %}
              {% assign loop_url = '&loop=1&playlist=' | append: video_url_id %}
              {%- if block.settings.source != 'uploaded' -%}
                {%- if block.settings.video_url.type == 'youtube' -%}
                  <iframe
                    {% if lazy %}data-{% endif %}src="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=0&controls=1&modestbranding=1&showinfo=0&rel=0{{ loop_url }}"                     
                    data-src1="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=1&controls=1&modestbranding=1&showinfo=0{{ loop_url }}" 
                    data-src2="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=0&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                    data-video-id="{{ video_url_id }}"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen
                    class="lazy"
                  ></iframe>
                  {%- elsif block.settings.video_url.type == 'vimeo' -%}
                  <iframe  
                    {% if lazy %}data-{% endif %}src="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=0&controls=1&modestbranding=1&showinfo=0&rel=0{{ loop_url }}"
                    data-src1="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=1&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                    data-src2="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=0&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                    data-video-id="{{ video_url_id }}"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen
                    class="lazy"
                  ></iframe>
                  {% else %}
                    {% assign placeholder_video = 'https://cdn.shopify.com/videos/c/o/v/fbb140fd46e3429eba459e1549dbbe38.mp4' %}
                    <video {% if block.settings.poster != blank %}poster="{{ block.settings.poster | image_url }}"{% endif %} {% if lazy %}data-{% endif %}src="{{ placeholder_video }}" playsinline preload="none" loop class="lazy"></video>
                {% endif %}
              {% else %}
                {% assign placeholder_video = 'https://cdn.shopify.com/videos/c/o/v/fbb140fd46e3429eba459e1549dbbe38.mp4' %}
                <video {% if block.settings.poster != blank %}poster="{{ block.settings.poster | image_url }}"{% endif %} {% if lazy %}data-{% endif %}src="{% if block.settings.video != blank %}{{ block.settings.video.sources[1].url }}{% else %}{{ placeholder_video }}{% endif %}" playsinline preload="none" loop class="lazy"></video>
                <div class="instafeed-icon-{{ section.id }}">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 16 16"
                    width="1em"
                    height="1em"
                    role="presentation"
                    class="instafeed-play-{{ section.id }}"
                  >
                    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
                  </svg>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 16 16"
                    width="1em"
                    height="1em"
                    fill="currentColor"
                    role="presentation"
                    class="instafeed-pause-{{ section.id }}"
                  >
                    <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
                  </svg>
                </div>
              {% endif %}                
            </div>             
          </div>
        {% elsif block.type == 'image' %}
          <div class="instafeed-card-{{ section.id }} {% if block.settings.use_big_image %}big-video{% endif %}">
            <{% if block.settings.url != blank %}a href="{{ block.settings.url }}" target="_blank"{% else %}div{% endif %} class="instafeed-image-{{ section.id }}">
              {% if block.settings.image != blank %}
                {{ block.settings.image | image_url: width: 1500 | image_tag:
                  loading: loading_attribute,
                  sizes: "(min-width: 1024px) 100vw, 100vw",
                  widths: '375, 550, 750, 1100, 1500, 1780, 2000',
                  alt: block.settings.image.alt | escape
                }}
              {% else %}
                {{ 'image' | placeholder_svg_tag }}
              {% endif %}
            </{% if block.settings.url != blank %}a{% else %}div{% endif %}>             
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {% if use_slider_mobile %}
      <div class="instafeed-cards-slider-{{ section.id }} swiper">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            {% if block.type == 'video' %}
              <div class="instafeed-card-{{ section.id }} {% if block.settings.use_big_video %}big-video{% endif %} swiper-slide">
                <div class="instafeed-video-{{ section.id }}">
                  {% assign video_url_id = block.settings.video_url.id %}
                  {% assign video_id = block.settings.video.id %}
                  {% assign loop_url = '&loop=1&playlist=' | append: video_url_id %}
                  {%- if block.settings.source != 'uploaded' -%}
                    {%- if block.settings.video_url.type == 'youtube' -%}
                      <iframe
                        {% if lazy %}data-{% endif %}src="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=0&controls=1&modestbranding=1&showinfo=0&rel=0{{ loop_url }}"                     
                        data-src1="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=1&controls=1&modestbranding=1&showinfo=0{{ loop_url }}" 
                        data-src2="https://www.youtube.com/embed/{{ video_url_id }}?enablejsapi=1&mute=1&autoplay=0&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                        data-video-id="{{ video_url_id }}"
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        class="lazy"
                      ></iframe>
                      {%- elsif block.settings.video_url.type == 'vimeo' -%}
                      <iframe  
                        {% if lazy %}data-{% endif %}src="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=0&controls=1&modestbranding=1&showinfo=0&rel=0{{ loop_url }}"
                        data-src1="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=1&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                        data-src2="https://player.vimeo.com/video/{{ video_url_id }}?enablejsapi=1&muted=1&autoplay=0&controls=1&modestbranding=1&showinfo=0{{ loop_url }}"
                        data-video-id="{{ video_url_id }}"
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        class="lazy"
                      ></iframe>
                      {% else %}
                        {% assign placeholder_video = 'https://cdn.shopify.com/videos/c/o/v/fbb140fd46e3429eba459e1549dbbe38.mp4' %}
                        <video {% if block.settings.poster != blank %}poster="{{ block.settings.poster | image_url }}"{% endif %} {% if lazy %}data-{% endif %}src="{{ placeholder_video }}" playsinline preload="none" loop class="lazy"></video>
                    {% endif %}
                  {% else %}
                    {% assign placeholder_video = 'https://cdn.shopify.com/videos/c/o/v/fbb140fd46e3429eba459e1549dbbe38.mp4' %}
                    <video {% if block.settings.poster != blank %}poster="{{ block.settings.poster | image_url }}"{% endif %} {% if lazy %}data-{% endif %}src="{% if block.settings.video != blank %}{{ block.settings.video.sources[1].url }}{% else %}{{ placeholder_video }}{% endif %}" playsinline preload="none" loop class="lazy"></video>
                    <div class="instafeed-icon-{{ section.id }}">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 16 16"
                        width="1em"
                        height="1em"
                        role="presentation"
                        class="instafeed-play-{{ section.id }}"
                      >
                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
                      </svg>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 16 16"
                        width="1em"
                        height="1em"
                        fill="currentColor"
                        role="presentation"
                        class="instafeed-pause-{{ section.id }}"
                      >
                        <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
                      </svg>
                    </div>
                  {% endif %}                
                </div>             
              </div>
            {% elsif block.type == 'image' %}
              <div class="instafeed-card-{{ section.id }} {% if block.settings.use_big_image %}big-video{% endif %} swiper-slide">
                <{% if block.settings.url != blank %}a href="{{ block.settings.url }}" target="_blank"{% else %}div{% endif %} class="instafeed-image-{{ section.id }}">
                  {% if block.settings.image != blank %}
                    {{ block.settings.image | image_url: width: 1500 | image_tag:
                      loading: loading_attribute,
                      sizes: "(min-width: 1024px) 100vw, 100vw",
                      widths: '375, 550, 750, 1100, 1500, 1780, 2000',
                      alt: block.settings.image.alt | escape
                    }}
                  {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                  {% endif %}
                </{% if block.settings.url != blank %}a{% else %}div{% endif %}>             
              </div>
            {% endif %}
          {% endfor %}
        </div>        
      </div>
    {% endif %}
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.2/dist/lazyload.min.js"></script>

{% if use_slider_mobile %}
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
{% endif %}

<script>
  function initInstafeed9() {
    window.addEventListener(
      "LazyLoad::Initialized",
      function (event) {
        window.lazyLoadInstance = event.detail.instance;
      },
      false
    );
    let lazyLoadInstance = new LazyLoad();

    {% if use_slider_mobile %}
      const slider = new Swiper(`.instafeed-cards-slider-{{ section.id }}`, {
        speed: 300,
        loop: true,
        slidesPerView: {{ cards_per_row_mobile }},
        spaceBetween: {{ cards_gap_mobile }},
      });
    {% endif %}

    document.querySelectorAll('.instafeed-card-{{ section.id }}').forEach(el => {
      let btn = el.querySelector('.instafeed-icon-{{ section.id }}');
      let frame = el.querySelector('iframe');
      let src;
      let src2;
      if (frame) {
        src = frame.getAttribute("data-src1");
        src2 = frame.getAttribute("data-src2");
      }
      let video = el.querySelector('video');

      if(btn) {
        el.addEventListener('click', () => {
          document.querySelectorAll('.instafeed-card-{{ section.id }}').forEach(otherEl => {
            if (otherEl !== el) {
              let otherBtn = otherEl.querySelector('.instafeed-icon-{{ section.id }}');
              let otherFrame = otherEl.querySelector('iframe');
              let otherVideo = otherEl.querySelector('video');

              if (otherVideo) {
                otherVideo.pause();
              }
              if (otherFrame && otherFrame.src !== otherFrame.getAttribute("data-src2")) {
                otherFrame.src = otherFrame.getAttribute("data-src2");
              }

              if (otherBtn) {
                otherBtn.classList.remove('active');
                otherBtn.classList.remove('hide');
              }
            }
          });

          setTimeout(() => {
            
            btn.classList.toggle('active');

            if (btn.classList.contains('active')) {
              // Логика включения
              if (frame) {
                frame.src = src;
                btn.classList.add('hide');
              }
              if (video) {
                video.play();
                video.muted = false;
                video.setAttribute("mute", "false");
              }
            } else {
              if (frame) {
                frame.src = src2;
                btn.classList.remove('hide');
              }
              if (video) {
                video.pause();
              }
            }
          }, 1000);
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', initInstafeed9);

  if (Shopify.designMode) {
    document.addEventListener('shopify:section:unload', initInstafeed9);
    document.addEventListener('shopify:section:load', initInstafeed9);
  }
</script>

{% schema %}
  {
    "name": "SS - Instafeed #9",
    "settings": [  
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "range",
        "id": "content_max_width",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "%",
        "label": "Max width",
        "default": 80
      },
      {
        "type": "text_alignment",
        "id": "content_align",
        "label": "Alignment"
      },
      {
        "type": "text_alignment",
        "id": "content_align_mobile",
        "label": "Alignment - mobile"
      },   
      {
        "type": "header",
        "content": "Cards"
      },
      {
        "type": "range",
        "id": "cards_per_row",
        "min": 1,
        "max": 10,
        "step": 1,
        "label": "Cards per row",
        "default": 9        
      },
      {
        "type": "select",
        "id": "cards_per_row_mobile",        
        "label": "Cards per row - mobile",
        "default": "2",
        "options": [
          {
            "label": "1",
            "value": "1"
          },
          {
            "label": "2",
            "value": "2"
          }
        ]        
      },
      {
        "type": "checkbox",
        "id": "use_slider_mobile",
        "label": "Carousel on mobile",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "cards_advanced",
        "label": "Advanced settings",
        "default": false
      },
      {
        "type": "range",
        "id": "cards_gap",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Gap",
        "default": 16,
        "visible_if": "{{ section.settings.cards_advanced }}"
      },
      {
        "type": "range",
        "id": "cards_gap_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Gap - mobile",
        "default": 16,
        "visible_if": "{{ section.settings.cards_advanced }}"
      },
      {
        "type": "range",
        "id": "cards_mt",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Margin top",
        "default": 48,
        "visible_if": "{{ section.settings.cards_advanced }}"
      },
      {
        "type": "range",
        "id": "cards_mt_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Margin top - mobile",
        "default": 32,
        "visible_if": "{{ section.settings.cards_advanced }}"
      },
      {
        "type": "header",
        "content": "Media"
      },
      {
         "type": "range",
         "id": "media_radius",
         "min": 0,
         "max": 40,
         "step": 2,
         "unit": "px",
         "label": "Roundness",
         "default": 0
      },
      {
         "type": "range",
         "id": "media_border_thickness",
         "min": 0,
         "max": 10,
         "step": 1,
         "unit": "px",
         "label": "Border thickness",
         "default": 0
      },
      {
        "type": "select",
        "id": "media_ratio",
        "label": "Aspect ratio",
        "default": "portrait",
        "options": [
          {
            "label": "Portrait",
            "value": "portrait"
          },
          {
            "label": "Square",
            "value": "square"
          },
          {
            "label": "Landscape",
            "value": "landscape"
          },
          {
            "label": "Original",
            "value": "original"
          }
        ]
      },
      {
        "type": "select",
        "id": "media_ratio_mobile",
        "label": "Aspect ratio - mobile",
        "default": "portrait",
        "options": [
          {
            "label": "Portrait",
            "value": "portrait"
          },
          {
            "label": "Square",
            "value": "square"
          },
          {
            "label": "Landscape",
            "value": "landscape"
          },
          {
            "label": "Original",
            "value": "original"
          }
        ]
      },
       {
        "type": "header",
        "content": "Play button"
      },
      {
        "type": "range",
        "id": "icon_size",
        "min": 20,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Size",
        "default": 32
      },
      {
        "type": "range",
        "id": "icon_size_mobile",
        "min": 20,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Size - mobile",
        "default": 32
      },
      {
        "type": "range",
        "id": "icon_border_thickness",
        "min": 0,
        "max": 10,
        "step": 1,
        "unit": "px",
        "label": "Border thickness",
        "default": 0
      },
      {
        "type": "select",
        "id": "icon_position",
        "label": "Position",
        "default": "bottom_left",
        "options": [
          {
            "label": "Center",
            "value": "center"
          },
          {
            "label": "Top left",
            "value": "top_left"
          },
          {
            "label": "Top right",
            "value": "top_right"
          },
          {
            "label": "Bottom left",
            "value": "bottom_left"
          },
          {
            "label": "Bottom right",
            "value": "bottom_right"
          }
        ]
      },
      {
        "type": "select",
        "id": "icon_position_mobile",
        "label": "Position - mobile",
        "default": "bottom_left",
        "options": [
          {
            "label": "Center",
            "value": "center"
          },
          {
            "label": "Top left",
            "value": "top_left"
          },
          {
            "label": "Top right",
            "value": "top_right"
          },
          {
            "label": "Bottom left",
            "value": "bottom_left"
          },
          {
            "label": "Bottom right",
            "value": "bottom_right"
          }
        ]
      },         
      {
        "type": "header",
        "content": "Video colors"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "media_border_color",
        "default": "#000000"
      }, 
      {
        "type": "header",
        "content": "Play button colors"
      },     
      {
        "type": "color",
        "label": "Icon",
        "id": "icon_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Background",
        "id": "icon_bg_color",
        "default": "#000000"
      },
      {
        "type": "range",
        "id": "icon_bg_opacity",
        "min": 0,
        "max": 1,
        "step": 0.1,
        "label": "Opacity",
        "default": 0.3
      },
      {
        "type": "color",
        "label": "Border",
        "id": "icon_border_color",
        "default": "#FFFFFF"
      },
      {
        "type": "header",
        "content": "Section colors"
      },
      {
        "type": "select",
        "id": "background_style",
        "label": "Background style",
        "default": "solid",
        "options": [
          {
            "label": "Solid",
            "value": "solid"
          },
          {
            "label": "Gradient",
            "value": "gradient"
          }
        ]
      },
      {
        "type": "color",
        "label": "Background",
        "id": "background_color",
        "default": "#FFFFFF",
        "visible_if": "{{ section.settings.background_style == 'solid' }}"
      },
      {
        "type": "color_background",
        "id": "background_gradient",
        "label": "Gradient",
        "default": "linear-gradient(180deg, #FFFFFF 0%, #F2F2F2 100%)",
        "visible_if": "{{ section.settings.background_style == 'gradient' }}"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "border_color",
        "default": "#121212"
      },   
      {
        "type": "header",
        "content": "Section margin (outside)"
      },
      {
        "type": "range",
        "id": "margin_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Top",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Bottom",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Sides",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Sides - mobile",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section padding (inside)"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Top",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Bottom",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Sides",
        "default": 5
      },
      {
        "type": "range",
        "id": "padding_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Sides - mobile",
        "default": 1.5
      },
      {
        "type": "header",
        "content": "Section"
      },
      {
        "type": "select",
        "id": "width",
        "label": "Width",
        "default": "page",
        "options": [
          {
            "label": "Page",
            "value": "page"
          },
          {
            "label": "Full",
            "value": "full"
          },
          {
            "label": "Custom",
            "value": "custom"
          }
        ]
      },
      {
        "type": "range",
        "id": "content_width",
        "min": 800,
        "max": 2000,
        "step": 100,
        "unit": "px",
        "label": "Content width",
        "default": 1200,
        "visible_if": "{{ section.settings.width == 'custom' }}"
      },
      {
        "type": "range",
        "id": "border_thickness",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Border thickness",
        "default": 0
      },
      {
        "type": "range",
        "id": "section_radius",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Roundness",
        "default": 0
      },
      {
        "type": "checkbox",
        "id": "lazy",
        "label": "Lazy load",
        "info": "Lazy load media for speed optimisation",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "sub_heading",
        "name": "Subheading",
        "limit": 1,
        "settings": [
          {
            "type": "richtext",
            "id": "sub_heading",
            "label": "Subheading",
            "default": "<h3>Subheading</h3>"
          },
          {
            "type": "checkbox",
            "id": "sub_heading_custom",
            "label": "Use custom font",
            "default": false
          },
          {
            "type": "font_picker",
            "id": "sub_heading_font",
            "label": "Font family",
            "default": "josefin_sans_n4",
            "visible_if": "{{ block.settings.sub_heading_custom }}"
          },
          {
            "type": "range",
            "id": "sub_heading_size",
            "min": 0,
            "max": 40,
            "step": 1,
            "unit": "px",
            "label": "Font size",
            "default": 12
          },
          {
            "type": "range",
            "id": "sub_heading_size_mobile",
            "min": 0,
            "max": 40,
            "step": 1,
            "unit": "px",
            "label": "Font size - mobile",
            "default": 12
          },
          {
            "type": "checkbox",
            "id": "sub_heading_advanced",
            "label": "Advanced settings",
            "default": false
          },
          {
            "type": "range",
            "id": "sub_heading_height",
            "min": 50,
            "max": 200,
            "step": 10,
            "unit": "%",
            "label": "Line height",
            "default": 130,
            "visible_if": "{{ block.settings.sub_heading_advanced }}"
          },
          {
            "type": "range",
            "id": "sub_heading_mt",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top",
            "default": 0,
            "visible_if": "{{ block.settings.sub_heading_advanced }}"
          },
          {
            "type": "range",
            "id": "sub_heading_mt_mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top - mobile",
            "default": 0,
            "visible_if": "{{ block.settings.sub_heading_advanced }}"
          },
          {
            "type": "color",
            "label": "Color",
            "id": "sub_heading_color",
            "default": "#121212"
          }
        ]
      },
      {
        "type": "heading",
        "name": "Heading",
        "limit": 1,
        "settings": [
          {
            "type": "richtext",
            "id": "heading",
            "label": "Heading",
            "default": "<h2>Instafeed #9</h2>"
          },
          {
            "type": "checkbox",
            "id": "heading_custom",
            "label": "Use custom font",
            "default": false
          },
          {
            "type": "font_picker",
            "id": "heading_font",
            "label": "Font family",
            "default": "josefin_sans_n4",
            "visible_if": "{{ block.settings.heading_custom }}"
          },
          {
            "type": "range",
            "id": "heading_size",
            "min": 0,
            "max": 72,
            "step": 2,
            "unit": "px",
            "label": "Font size",
            "default": 48
          },
          {
            "type": "range",
            "id": "heading_size_mobile",
            "min": 0,
            "max": 72,
            "step": 2,
            "unit": "px",
            "label": "Font size - mobile",
            "default": 32
          },
          {
            "type": "checkbox",
            "id": "heading_advanced",
            "label": "Advanced settings",
            "default": false
          },
          {
            "type": "range",
            "id": "heading_height",
            "min": 50,
            "max": 200,
            "step": 10,
            "unit": "%",
            "label": "Line height",
            "default": 130,
            "visible_if": "{{ block.settings.heading_advanced }}"
          },
          {
            "type": "range",
            "id": "heading_mt",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top",
            "default": 12,
            "visible_if": "{{ block.settings.heading_advanced }}"
          },
          {
            "type": "range",
            "id": "heading_mt_mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top - mobile",
            "default": 12,
            "visible_if": "{{ block.settings.heading_advanced }}"
          },
          {
            "type": "color",
            "label": "Color",
            "id": "heading_color",
            "default": "#121212"
          }
        ]
      },
      {
        "type": "text",
        "name": "Text",
        "limit": 1,
        "settings": [
          {
            "type": "richtext",
            "id": "text",
            "label": "Text",
            "default": "<p>Tell your story</p>"
          },
          {
            "type": "checkbox",
            "id": "text_custom",
            "label": "Use custom font",
            "default": false
          },
          {
            "type": "font_picker",
            "id": "text_font",
            "label": "Font family",
            "default": "josefin_sans_n4",
            "visible_if": "{{ block.settings.text_custom }}"
          },
          {
            "type": "range",
            "id": "text_size",
            "min": 0,
            "max": 40,
            "step": 1,
            "unit": "px",
            "label": "Font size",
            "default": 18
          },
          {
            "type": "range",
            "id": "text_size_mobile",
            "min": 0,
            "max": 40,
            "step": 1,
            "unit": "px",
            "label": "Font size - mobile",
            "default": 14
          },
          {
            "type": "checkbox",
            "id": "text_advanced",
            "label": "Advanced settings",
            "default": false
          },
          {
            "type": "range",
            "id": "text_height",
            "min": 50,
            "max": 200,
            "step": 10,
            "unit": "%",
            "label": "Line height",
            "default": 150,
            "visible_if": "{{ block.settings.text_advanced }}"
          },
          {
            "type": "range",
            "id": "text_mt",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top",
            "default": 16,
            "visible_if": "{{ block.settings.text_advanced }}"
          },
          {
            "type": "range",
            "id": "text_mt_mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Margin top - mobile",
            "default": 12,
            "visible_if": "{{ block.settings.text_advanced }}"
          },
          {
            "type": "color",
            "label": "Color",
            "id": "text_color",
            "default": "#121212"
          }
        ]
      },
      {
        "type": "video",
        "name": "Video",
        "settings": [
          {
            "type": "select",
            "id": "source",
            "label": "Source",
            "default": "uploaded",
            "options": [
              {
                "label": "Uploaded",
                "value": "uploaded"
              },
              {
                "label": "External URL",
                "value": "external"
              }
            ]
          },
          {
            "type": "video",
            "id": "video",
            "label": "Video",
            "visible_if": "{{ block.settings.source == 'uploaded' }}"
          },
          {
            "type": "video_url",
            "id": "video_url",
            "label": "URL",
            "accept": [
              "youtube",
              "vimeo"
            ],
            "visible_if": "{{ block.settings.source == 'external' }}",
            "info": "Use a YouTube or Vimeo URL"
          },
          {
            "type": "image_picker",
            "id": "poster",
            "label": "Thumbnail",
            "info":"Thumbnail image for Shopify-hosted video. Use when autoplay is turned off to remove blurry image",
            "visible_if": "{{ block.settings.source == 'uploaded' }}"
          },
          {
            "type": "checkbox",
            "id": "use_big_video",
            "label": "Display as large video",
            "default": true
          }
        ]
      },
      {
        "type": "image",
        "name": "Image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Link"
          },
          {
            "type": "checkbox",
            "id": "use_big_image",
            "label": "Display as large image",
            "default": true
          }
        ]
      },
      {
        "type": "button",
        "name": "Button",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "button",
            "label": "Button label",
            "default": "@ourbrand"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Button link"
          },
          {
            "type": "checkbox",
            "id": "open_in_new_tab",
            "label": "Open link in new tab",
            "default": false
          },
          {
            "type": "select",
            "id": "button_style",
            "label": "Style",
            "default": "outline",
            "options": [
              {
                "label": "Link",
                "value": "link"
              },
              {
                "label": "Non-outline",
                "value": "non_outline"
              },
              {
                "label": "Non-outline & arrow",
                "value": "non_outline_arrow"
              },
              {
                "label": "Outline",
                "value": "outline"
              },
              {
                "label": "Outline & arrow",
                "value": "outline_arrow"
              }
            ]
          },
          {
            "type": "checkbox",
            "id": "button_custom",
            "label": "Use custom font",
            "default": false
          },
          {
            "type": "font_picker",
            "id": "button_font",
            "label": "Font family",
            "default": "josefin_sans_n4",
            "visible_if": "{{ block.settings.button_custom }}"
          },
          {
            "type": "range",
            "id": "button_size",
            "min": 0,
            "max": 30,
            "step": 1,
            "unit": "px",
            "label": "Font size",
            "default": 14
          },
          {
            "type": "range",
            "id": "button_size_mobile",
            "min": 0,
            "max": 30,
            "step": 1,
            "unit": "px",
            "label": "Font size - mobile",
            "default": 14
          },
          {
            "type": "checkbox",
            "id": "button_advanced",
            "label": "Advanced settings",
            "default": false
          },
          {
            "type": "range",
            "id": "button_height",
            "min": 50,
            "max": 200,
            "step": 10,
            "unit": "%",
            "label": "Line height",
            "default": 100,
            "visible_if": "{{ block.settings.button_advanced }}"
          },
          {
            "type": "range",
            "id": "button_padding_horizontal",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Padding horizontal",
            "default": 32,
            "visible_if": "{{ block.settings.button_style != 'link' and block.settings.button_advanced }}"
          },
          {
            "type": "range",
            "id": "button_padding_horizontal_mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Padding horizontal - mobile",
            "default": 32,
            "visible_if": "{{ block.settings.button_style != 'link' and block.settings.button_advanced }}"
          },
          {
            "type": "range",
            "id": "button_padding_vertical",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Padding vertical",
            "default": 16,
            "visible_if": "{{ block.settings.button_style != 'link' and block.settings.button_advanced }}"
          },
          {
            "type": "range",
            "id": "button_padding_vertical_mobile",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Padding vertical - mobile",
            "default": 16,
            "visible_if": "{{ block.settings.button_style != 'link' and block.settings.button_advanced }}"
          },
          {
            "type": "range",
            "id": "button_radius",
            "min": 0,
            "max": 100,
            "step": 2,
            "unit": "px",
            "label": "Roundness",
            "default": 100,
            "visible_if": "{{ block.settings.button_style != 'link' }}"
          },
          {
            "type": "range",
            "id": "button_border_thickness",
            "min": 1,
            "max": 10,
            "step": 1,
            "unit": "px",
            "label": "Border thickness",
            "default": 1,
            "visible_if": "{{ block.settings.button_style == 'outline' or block.settings.button_style == 'outline_arrow' }}"
          },
          {
            "type": "header",
            "content": "Colors"
          },
          {
            "type": "color",
            "label": "Text",
            "id": "button_color",
            "default": "#121212"
          },
          {
            "type": "color",
            "label": "Text hover",
            "id": "button_hover_color",
            "default": "#FFFFFF"
          },
          {
            "type": "color",
            "label": "Background",
            "id": "button_bg_color",
            "default": "#FFFFFF",
            "visible_if": "{{ block.settings.button_style != 'link' }}"
          },
          {
            "type": "color",
            "label": "Background hover",
            "id": "button_bg_hover_color",
            "default": "#121212",
            "visible_if": "{{ block.settings.button_style != 'link' }}"
          },
          {
            "type": "color",
            "label": "Border",
            "id": "button_border_color",
            "default": "#121212",
            "visible_if": "{{ block.settings.button_style == 'outline' or block.settings.button_style == 'outline_arrow' }}"
          },
          {
            "type": "color",
            "label": "Border hover",
            "id": "button_border_hover_color",
            "default": "#121212",
            "visible_if": "{{ block.settings.button_style == 'outline' or block.settings.button_style == 'outline_arrow' }}"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "SS - Instafeed #9",
        "blocks": [
          {
            "type": "sub_heading"
          },
          {
            "type": "heading"
          },
          {
            "type": "text"
          },
          {
            "type": "button"
          },     
          {
            "type": "video",
            "settings": {
              "use_big_video": true
            }
          },
          {
            "type": "image",
            "settings": {
              "use_big_image": false
            }
          },
          {
            "type": "image",
            "settings": {
              "use_big_image": false
            }
          },
          {
            "type": "video",
            "settings": {
              "use_big_video": true
            }
          },
          {
            "type": "video",
            "settings": {
              "use_big_video": false
            }
          },
          {
            "type": "image",
            "settings": {
              "use_big_image": true
            }
          },
          {
            "type": "image",
            "settings": {
              "use_big_image": false
            }
          },
          {
            "type": "video",
            "settings": {
              "use_big_video": false
            }
          },
          {
            "type": "image",
            "settings": {
              "use_big_image": false
            }
          }
        ]
      }
    ]
  }
{% endschema %}